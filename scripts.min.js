function toggleMenu(){const menu=document.getElementById('nav-menu');menu.classList.toggle('active')}const FORM_MESSAGES={success:'Message sent successfully!We\'ll get back to you soon.',error:'Error sending message. Please email us directly at info@hevin.design',networkError:'Network error. Please email us directly at info@hevin.design'};function debounce(func,wait){let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout);func(...args)};clearTimeout(timeout);timeout=setTimeout(later,wait)}}function initCursorGradient(){const isMobile=window.matchMedia('(pointer:coarse)').matches;const prefersReducedMotion=window.matchMedia('(prefers-reduced-motion:reduce)').matches;if(isMobile||prefersReducedMotion){return}const overlay=document.querySelector('.cursor-gradient-overlay');if(!overlay)return;let cursorX=50;let cursorY=50;let requestId=null;function updateCursorPosition(e){cursorX=(e.clientX/window.innerWidth)*100;cursorY=(e.clientY/window.innerHeight)*100;if(!requestId){requestId=requestAnimationFrame(()=>{document.body.style.setProperty('--cursor-x',`${cursorX}%`);document.body.style.setProperty('--cursor-y',`${cursorY}%`);requestId=null})}}document.addEventListener('mousemove',updateCursorPosition,{passive:true})}document.addEventListener('DOMContentLoaded',()=>{initCursorGradient();document.body.classList.add('loaded');const nav=document.querySelector('nav');const navLinks=nav.querySelectorAll('a');let navHeight=null;const getNavHeight=()=>{if(navHeight===null){navHeight=nav.offsetHeight}return navHeight};let resizeTimeout=null;window.addEventListener('resize',()=>{if(resizeTimeout)clearTimeout(resizeTimeout);resizeTimeout=setTimeout(()=>{navHeight=null},150)},{passive:true});navLinks.forEach(link=>{link.addEventListener('click',(e)=>{e.preventDefault();const target=document.querySelector(link.getAttribute('href'));if(target){const targetRect=target.getBoundingClientRect();const scrollTop=window.pageYOffset||document.documentElement.scrollTop;window.scrollTo({top:scrollTop+targetRect.top-getNavHeight()-20,behavior:'smooth'})}})});const menu=document.querySelector('#nav-menu');const hamburger=document.querySelector('.menu-toggle');const links=menu ? menu.querySelectorAll('a'):[];if(menu&&hamburger){document.addEventListener('click',(e)=>{if(!menu.contains(e.target)&&!hamburger.contains(e.target)){menu.classList.remove('active')}});links.forEach(link=>{link.addEventListener('click',()=>{menu.classList.remove('active')})})}const animatedElements=document.querySelectorAll('section,.service-card,.project-card,.process-step');const mainObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('visible');if(entry.target.nodeName.toLowerCase()==='section'){entry.target.classList.add('in-view');entry.target.style.opacity='1'}mainObserver.unobserve(entry.target)}})},{threshold:0.1,rootMargin:'50px'});animatedElements.forEach(element=>{mainObserver.observe(element)});const faqSection=document.querySelector('.faq');if(faqSection){let rafId=null;faqSection.addEventListener('mousemove',(e)=>{const item=e.target.closest('.faq-item');if(!item||rafId)return;rafId=requestAnimationFrame(()=>{const rect=item.getBoundingClientRect();const x=((e.clientX-rect.left)/rect.width)*100;const y=((e.clientY-rect.top)/rect.height)*100;item.style.setProperty('--mouse-x',x+'%');item.style.setProperty('--mouse-y',y+'%');rafId=null})});faqSection.addEventListener('click',(e)=>{const question=e.target.closest('.faq-question');if(!question)return;const isExpanded=question.getAttribute('aria-expanded')==='true';const answer=question.nextElementSibling;const icon=question.querySelector('.faq-icon');question.setAttribute('aria-expanded',!isExpanded);answer.classList.toggle('open');icon.textContent=isExpanded ? '+':'-'})}const aboutSection=document.getElementById('about');if(aboutSection){const aboutObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){aboutSection.classList.add('fade-to-white')}else{aboutSection.classList.remove('fade-to-white')}})},{threshold:0.2});aboutObserver.observe(aboutSection)}const form=document.getElementById('contact-form');if(form){form.addEventListener('submit',async(e)=>{e.preventDefault();const submitButton=form.querySelector('button[type="submit"]');const originalText=submitButton.textContent;let messageEl=document.getElementById('form-message');if(!messageEl){messageEl=document.createElement('div');messageEl.id='form-message';messageEl.style.cssText='margin-top:1rem;padding:1rem;border-radius:0.375rem;text-align:center;font-weight:500;';form.appendChild(messageEl)}submitButton.textContent='Sending...';submitButton.disabled=true;messageEl.textContent='';messageEl.style.display='none';const data=new FormData(form);try{const response=await fetch(form.action,{method:'POST',body:data,headers:{'Accept':'application/json'}});if(response.ok){messageEl.textContent=FORM_MESSAGES.success;messageEl.style.backgroundColor='#D1FAE5';messageEl.style.color='#065F46';messageEl.style.display='block';messageEl.setAttribute('role','status');messageEl.setAttribute('aria-live','polite');form.reset()}else{messageEl.textContent=FORM_MESSAGES.error;messageEl.style.backgroundColor='#FEE2E2';messageEl.style.color='#991B1B';messageEl.style.display='block';messageEl.setAttribute('role','alert');messageEl.setAttribute('aria-live','assertive')}}catch(error){messageEl.textContent=FORM_MESSAGES.networkError;messageEl.style.backgroundColor='#FEE2E2';messageEl.style.color='#991B1B';messageEl.style.display='block';messageEl.setAttribute('role','alert');messageEl.setAttribute('aria-live','assertive')}finally{submitButton.textContent=originalText;submitButton.disabled=false}})}const cards=document.querySelectorAll('.service-card,.project-card');const isTouchDevice=window.matchMedia('(pointer:coarse)').matches;const prefersReducedMotion=window.matchMedia('(prefers-reduced-motion:reduce)').matches;cards.forEach(card=>{if(!isTouchDevice&&!prefersReducedMotion&&window.innerWidth>768){let rafId=null;let lastMouseEvent=null;let cardRect=card.getBoundingClientRect();const updateCardRect=debounce(()=>{cardRect=card.getBoundingClientRect()},150);window.addEventListener('resize',updateCardRect,{passive:true});const updateCardEffect=()=>{if(!lastMouseEvent)return;const e=lastMouseEvent;const x=e.clientX-cardRect.left;const y=e.clientY-cardRect.top;const centerX=cardRect.width/2;const centerY=cardRect.height/2;const xPercent=(x/cardRect.width)*100;const yPercent=(y/cardRect.height)*100;const rotateX=((y-centerY)/centerY)*-2;const rotateY=((x-centerX)/centerX)*2;card.style.setProperty('--mouse-x',`${xPercent}%`);card.style.setProperty('--mouse-y',`${yPercent}%`);card.style.transform=`perspective(1000px)rotateX(${rotateX}deg)rotateY(${rotateY}deg)scale(1.05)`;rafId=null};card.addEventListener('mousemove',(e)=>{lastMouseEvent=e;if(!rafId){rafId=requestAnimationFrame(updateCardEffect)}});card.addEventListener('mouseleave',()=>{lastMouseEvent=null;if(rafId){cancelAnimationFrame(rafId);rafId=null}card.style.transform='';card.style.setProperty('--mouse-x','50%');card.style.setProperty('--mouse-y','50%')})}});const shimmerElements=document.querySelectorAll('.shimmer');shimmerElements.forEach((el,index)=>{const shimmerCallback=(entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){setTimeout(()=>{entry.target.classList.add('visible')},index*400);shimmerObserver.unobserve(entry.target)}})};const shimmerObserver=new IntersectionObserver(shimmerCallback,{threshold:0.2});shimmerObserver.observe(el)})});