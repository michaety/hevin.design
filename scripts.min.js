function toggleMenu(){document.getElementById("nav-menu").classList.toggle("active")}const FORM_MESSAGES={success:"Message sent successfully! We'll get back to you soon.",error:"Error sending message. Please email us directly at info@hevin.design",networkError:"Network error. Please email us directly at info@hevin.design"},SHIMMER_DURATION=2e3;function updateHeroPortal(e){const t=document.querySelector(".hero");if(!t)return;const o=t.getBoundingClientRect(),r=(e.clientX-o.left)/o.width*100,s=(e.clientY-o.top)/o.height*100;t.style.setProperty("--mouse-x",r+"%"),t.style.setProperty("--mouse-y",s+"%")}document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add("loaded"),document.querySelectorAll("nav a").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=document.querySelector(e.getAttribute("href"));if(o){const e=document.querySelector("nav").offsetHeight;window.scrollTo({top:o.offsetTop-e-20,behavior:"smooth"})}})});const e=document.querySelector("#nav-menu"),t=document.querySelector(".menu-toggle"),o=e?e.querySelectorAll("a"):[];e&&t&&(document.addEventListener("click",o=>{e.contains(o.target)||t.contains(o.target)||e.classList.remove("active")}),o.forEach(t=>{t.addEventListener("click",()=>{e.classList.remove("active")})}));const r=document.querySelectorAll("section, .service-card, .project-card, .process-step"),s=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),s.unobserve(e.target))})},{threshold:.1,rootMargin:"50px"});r.forEach(e=>{s.observe(e)});const n=document.querySelectorAll(".faq-item"),c=document.querySelectorAll(".faq-question");n.forEach(e=>{e.addEventListener("mousemove",t=>{const o=e.getBoundingClientRect(),r=(t.clientX-o.left)/o.width*100,s=(t.clientY-o.top)/o.height*100;e.style.setProperty("--mouse-x",r+"%"),e.style.setProperty("--mouse-y",s+"%")})}),c.forEach(e=>{e.addEventListener("click",()=>{const t="true"===e.getAttribute("aria-expanded"),o=e.nextElementSibling,r=e.querySelector(".faq-icon");e.setAttribute("aria-expanded",!t),o.classList.toggle("open"),r.textContent=t?"+":"-"})}),document.addEventListener("mousemove",e=>{updateHeroPortal(e)},{passive:!0});const i=document.querySelectorAll("section"),a=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?(e.target.classList.add("in-view"),e.target.style.opacity="1"):e.target.classList.remove("in-view")})},{threshold:.3});i.forEach(e=>{a.observe(e)});const l=document.querySelectorAll("h1, h2, h3"),d=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!e.target.classList.contains("shimmer-done")&&(e.target.classList.add("shimmer"),e.target.classList.add("shimmer-done"),setTimeout(()=>{e.target.classList.remove("shimmer")},2e3))})},{threshold:.3});l.forEach(e=>{d.observe(e)});const u=document.getElementById("about");if(u){new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?u.classList.add("fade-to-white"):u.classList.remove("fade-to-white")})},{threshold:.2}).observe(u)}const m=document.getElementById("contact-form");m&&m.addEventListener("submit",async e=>{e.preventDefault();const t=m.querySelector('button[type="submit"]'),o=t.textContent;let r=document.getElementById("form-message");r||(r=document.createElement("div"),r.id="form-message",r.style.cssText="margin-top: 1rem; padding: 1rem; border-radius: 0.375rem; text-align: center; font-weight: 500;",m.appendChild(r)),t.textContent="Sending...",t.disabled=!0,r.textContent="",r.style.display="none";const s=new FormData(m);try{(await fetch(m.action,{method:"POST",body:s,headers:{Accept:"application/json"}})).ok?(r.textContent=FORM_MESSAGES.success,r.style.backgroundColor="#D1FAE5",r.style.color="#065F46",r.style.display="block",r.setAttribute("role","status"),r.setAttribute("aria-live","polite"),m.reset()):(r.textContent=FORM_MESSAGES.error,r.style.backgroundColor="#FEE2E2",r.style.color="#991B1B",r.style.display="block",r.setAttribute("role","alert"),r.setAttribute("aria-live","assertive"))}catch(e){r.textContent=FORM_MESSAGES.networkError,r.style.backgroundColor="#FEE2E2",r.style.color="#991B1B",r.style.display="block",r.setAttribute("role","alert"),r.setAttribute("aria-live","assertive")}finally{t.textContent=o,t.disabled=!1}});document.querySelectorAll(".service-card, .project-card").forEach(e=>{e.addEventListener("mousemove",t=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;if(window.innerWidth<=768)return;const o=e.getBoundingClientRect(),r=t.clientX-o.left,s=t.clientY-o.top,n=o.width/2,c=o.height/2,i=(s-c)/c*-10,a=(r-n)/n*10;e.style.transform=`perspective(1000px) rotateX(${i}deg) rotateY(${a}deg) scale(1.05)`}),e.addEventListener("mouseleave",()=>{e.style.transform=""})})});