function toggleMenu(){document.getElementById("nav-menu").classList.toggle("active")}let cursorTrails=[];const MAX_TRAILS=15;function createCursorTrail(e,t){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;if(window.innerWidth<=768)return;const n=document.createElement("div");if(n.className="cursor-trail",n.style.left=e+"px",n.style.top=t+"px",n.style.opacity="1",document.body.appendChild(n),cursorTrails.push(n),setTimeout(()=>{n.style.opacity="0",setTimeout(()=>{n.parentNode&&n.remove(),cursorTrails=cursorTrails.filter(e=>e!==n)},300)},200),cursorTrails.length>15){const e=cursorTrails.shift();e&&e.parentNode&&e.remove()}}function updateHeroPortal(e){const t=document.querySelector(".hero");if(!t)return;const n=t.getBoundingClientRect(),o=(e.clientX-n.left)/n.width*100,r=(e.clientY-n.top)/n.height*100;t.style.setProperty("--mouse-x",o+"%"),t.style.setProperty("--mouse-y",r+"%")}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#nav-menu"),t=document.querySelector(".menu-toggle"),n=e?e.querySelectorAll("a"):[];e&&t&&(document.addEventListener("click",n=>{e.contains(n.target)||t.contains(n.target)||e.classList.remove("active")}),n.forEach(t=>{t.addEventListener("click",()=>{e.classList.remove("active")})}));const o=[0,1,2,3,4],r=document.querySelectorAll("section, .service-card, .project-card, .process-step"),i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),i.unobserve(e.target))})},{threshold:.1,rootMargin:"50px"});r.forEach(e=>{i.observe(e)});const s=document.querySelectorAll(".cloud"),c=document.querySelector(".hero");function a(){const e=window.innerWidth<=768;s.forEach((t,n)=>{const r=parseFloat(t.style.top)||0;e&&!o.includes(n)?t.style.display="none":(t.style.display="block",t.dataset.initialTop=(r/100*c.clientHeight).toString())})}function l(){const e=c.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop,n=(e.top,e.height,window.innerWidth<=768),r=n?20:50;s.forEach((i,s)=>{if(n&&!o.includes(s))return void(i.style.display="none");const c=parseFloat(i.getAttribute("data-speed")),a=(parseFloat(i.dataset.initialTop)||0)+t*(1-c),l=i.offsetHeight,d=a+l;i.style.top=`${a}px`;let u=.8;a<-l+r?u=Math.max(0,(a+l)/r*.8):d>e.height-r&&(u=Math.max(0,(e.height-a)/r*.8)),i.style.opacity=u.toFixed(2)})}a(),s.forEach((e,t)=>{if(window.innerWidth<=768&&!o.includes(t))e.style.display="none";else{const t=parseFloat(e.getAttribute("data-speed"));e.style.animation=`bounceHover ${2+t}s infinite ease-in-out`,e.style.animationDelay=.5*t+"s"}}),window.addEventListener("resize",()=>{a(),l()}),window.addEventListener("scroll",l),l();document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t="true"===e.getAttribute("aria-expanded"),n=e.nextElementSibling,o=e.querySelector(".faq-icon");e.setAttribute("aria-expanded",!t),n.style.display=t?"none":"block",o.textContent=t?"+":"-"})});let d=0;document.addEventListener("mousemove",e=>{const t=Date.now();t-d>50&&(createCursorTrail(e.clientX,e.clientY),d=t),updateHeroPortal(e)});const u=document.querySelectorAll("section"),m=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?e.target.classList.add("in-view"):e.target.classList.remove("in-view")})},{threshold:.3});u.forEach(e=>{m.observe(e)});document.querySelectorAll(".service-card, .project-card").forEach(e=>{e.addEventListener("mousemove",t=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;if(window.innerWidth<=768)return;const n=e.getBoundingClientRect(),o=t.clientX-n.left,r=t.clientY-n.top,i=n.width/2,s=n.height/2,c=(r-s)/s*-10,a=(o-i)/i*10;e.style.transform=`perspective(1000px) rotateX(${c}deg) rotateY(${a}deg) scale(1.05)`}),e.addEventListener("mouseleave",()=>{e.style.transform=""})})});