function toggleMenu(){const menu=document.getElementById('nav-menu');menu.classList.toggle('active');}const FORM_MESSAGES={success:'Message sent successfully!We\'ll get back to you soon.',error:'Error sending message. Please email us directly at info@hevin.design',networkError:'Network error. Please email us directly at info@hevin.design'};function initCursorGradient(){const isMobile=window.matchMedia('(pointer:coarse)').matches;const prefersReducedMotion=window.matchMedia('(prefers-reduced-motion:reduce)').matches;if(isMobile||prefersReducedMotion){return;}const overlay=document.querySelector('.cursor-gradient-overlay');if(!overlay)return;let cursorX=50;let cursorY=50;let requestId=null;function updateCursorPosition(e){cursorX=(e.clientX/window.innerWidth)*100;cursorY=(e.clientY/window.innerHeight)*100;if(!requestId){requestId=requestAnimationFrame(()=>{document.body.style.setProperty('--cursor-x',`${cursorX}%`);document.body.style.setProperty('--cursor-y',`${cursorY}%`);requestId=null;});}}document.addEventListener('mousemove',updateCursorPosition,{passive:true});}document.addEventListener('DOMContentLoaded',()=>{initCursorGradient();document.body.classList.add('loaded');document.querySelectorAll('nav a').forEach(link=>{link.addEventListener('click',(e)=>{e.preventDefault();const target=document.querySelector(link.getAttribute('href'));if(target){const navHeight=document.querySelector('nav').offsetHeight;window.scrollTo({top:target.offsetTop-navHeight-20,behavior:'smooth'});}});});const menu=document.querySelector('#nav-menu');const hamburger=document.querySelector('.menu-toggle');const links=menu ? menu.querySelectorAll('a'):[];if(menu&&hamburger){document.addEventListener('click',(e)=>{if(!menu.contains(e.target)&&!hamburger.contains(e.target)){menu.classList.remove('active');}});links.forEach(link=>{link.addEventListener('click',()=>{menu.classList.remove('active');});});}const elements=document.querySelectorAll('section,.service-card,.project-card,.process-step');const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('visible');observer.unobserve(entry.target);}});},{threshold:0.1,rootMargin:'50px'});elements.forEach(element=>{observer.observe(element);});const faqItems=document.querySelectorAll('.faq-item');const faqQuestions=document.querySelectorAll('.faq-question');faqItems.forEach(item=>{item.addEventListener('mousemove',(e)=>{const rect=item.getBoundingClientRect();const x=((e.clientX-rect.left)/rect.width)*100;const y=((e.clientY-rect.top)/rect.height)*100;item.style.setProperty('--mouse-x',x+'%');item.style.setProperty('--mouse-y',y+'%');});});faqQuestions.forEach(question=>{question.addEventListener('click',()=>{const isExpanded=question.getAttribute('aria-expanded')==='true';const answer=question.nextElementSibling;const icon=question.querySelector('.faq-icon');question.setAttribute('aria-expanded',!isExpanded);answer.classList.toggle('open');icon.textContent=isExpanded ? '+':'-';});});const sections=document.querySelectorAll('section');const sectionObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('in-view');entry.target.style.opacity='1';}else{entry.target.classList.remove('in-view');}});},{threshold:0.3});sections.forEach(section=>{sectionObserver.observe(section);});const aboutSection=document.getElementById('about');if(aboutSection){const aboutObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){aboutSection.classList.add('fade-to-white');}else{aboutSection.classList.remove('fade-to-white');}});},{threshold:0.2});aboutObserver.observe(aboutSection);}const form=document.getElementById('contact-form');if(form){form.addEventListener('submit',async(e)=>{e.preventDefault();const submitButton=form.querySelector('button[type="submit"]');const originalText=submitButton.textContent;let messageEl=document.getElementById('form-message');if(!messageEl){messageEl=document.createElement('div');messageEl.id='form-message';messageEl.style.cssText='margin-top:1rem;padding:1rem;border-radius:0.375rem;text-align:center;font-weight:500;';form.appendChild(messageEl);}submitButton.textContent='Sending...';submitButton.disabled=true;messageEl.textContent='';messageEl.style.display='none';const data=new FormData(form);try{const response=await fetch(form.action,{method:'POST',body:data,headers:{'Accept':'application/json'}});if(response.ok){messageEl.textContent=FORM_MESSAGES.success;messageEl.style.backgroundColor='#D1FAE5';messageEl.style.color='#065F46';messageEl.style.display='block';messageEl.setAttribute('role','status');messageEl.setAttribute('aria-live','polite');form.reset();}else{messageEl.textContent=FORM_MESSAGES.error;messageEl.style.backgroundColor='#FEE2E2';messageEl.style.color='#991B1B';messageEl.style.display='block';messageEl.setAttribute('role','alert');messageEl.setAttribute('aria-live','assertive');}}catch(error){messageEl.textContent=FORM_MESSAGES.networkError;messageEl.style.backgroundColor='#FEE2E2';messageEl.style.color='#991B1B';messageEl.style.display='block';messageEl.setAttribute('role','alert');messageEl.setAttribute('aria-live','assertive');}finally{submitButton.textContent=originalText;submitButton.disabled=false;}});}const cards=document.querySelectorAll('.service-card,.project-card');const isTouchDevice=window.matchMedia('(pointer:coarse)').matches;const prefersReducedMotion=window.matchMedia('(prefers-reduced-motion:reduce)').matches;cards.forEach(card=>{if(!isTouchDevice&&!prefersReducedMotion&&window.innerWidth>768){let rafId=null;let lastMouseEvent=null;const updateCardEffect=()=>{if(!lastMouseEvent)return;const e=lastMouseEvent;const rect=card.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;const xPercent=(x/rect.width)*100;const yPercent=(y/rect.height)*100;card.style.setProperty('--mouse-x',`${xPercent}%`);card.style.setProperty('--mouse-y',`${yPercent}%`);const centerX=rect.width/2;const centerY=rect.height/2;const rotateX=((y-centerY)/centerY)*-10;const rotateY=((x-centerX)/centerX)*10;card.style.transform=`perspective(1000px)rotateX(${rotateX}deg)rotateY(${rotateY}deg)scale(1.05)`;rafId=null;};card.addEventListener('mousemove',(e)=>{lastMouseEvent=e;if(!rafId){rafId=requestAnimationFrame(updateCardEffect);}});card.addEventListener('mouseleave',()=>{lastMouseEvent=null;if(rafId){cancelAnimationFrame(rafId);rafId=null;}card.style.transform='';card.style.setProperty('--mouse-x','50%');card.style.setProperty('--mouse-y','50%');});}});const shimmerElements=document.querySelectorAll('.shimmer');const shimmerObserver=new IntersectionObserver(entries=>{let delay=0;entries.forEach(entry=>{if(entry.isIntersecting){setTimeout(()=>{entry.target.classList.add('visible');setTimeout(()=>entry.target.classList.remove('visible'),2000);},delay);delay+=400;}});},{threshold:0.2});shimmerElements.forEach(el=>shimmerObserver.observe(el));});