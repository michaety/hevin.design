function toggleMenu(){document.getElementById("nav-menu").classList.toggle("active")}const FORM_MESSAGES={success:"Message sent successfully! We'll get back to you soon.",error:"Error sending message. Please email us directly at info@hevin.design",networkError:"Network error. Please email us directly at info@hevin.design"},trail=document.createElement("div");let timeout;trail.className="cursor-trail",document.body.appendChild(trail);let cursorTrailEnabled=!1;function initCursorTrails(){window.matchMedia("(prefers-reduced-motion: reduce)").matches||window.innerWidth<768?trail.style.display="none":(cursorTrailEnabled=!0,document.body.style.cursor="none")}function updateCursorTrails(e,t){cursorTrailEnabled&&(trail.style.transform=`translate(${e-60}px, ${t-10}px)`,trail.style.opacity=.7,clearTimeout(timeout),timeout=setTimeout(()=>{trail.style.opacity=0},300))}function updateHeroPortal(e){const t=document.querySelector(".hero");if(!t)return;const r=t.getBoundingClientRect(),o=(e.clientX-r.left)/r.width*100,n=(e.clientY-r.top)/r.height*100;t.style.setProperty("--mouse-x",o+"%"),t.style.setProperty("--mouse-y",n+"%")}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("nav a").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const r=document.querySelector(e.getAttribute("href"));if(r){const e=document.querySelector("nav").offsetHeight;window.scrollTo({top:r.offsetTop-e-20,behavior:"smooth"})}})});const e=document.querySelector("#nav-menu"),t=document.querySelector(".menu-toggle"),r=e?e.querySelectorAll("a"):[];e&&t&&(document.addEventListener("click",r=>{e.contains(r.target)||t.contains(r.target)||e.classList.remove("active")}),r.forEach(t=>{t.addEventListener("click",()=>{e.classList.remove("active")})}));const o=document.querySelectorAll("section, .service-card, .project-card, .process-step"),n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),n.unobserve(e.target))})},{threshold:.1,rootMargin:"50px"});o.forEach(e=>{n.observe(e)});document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t="true"===e.getAttribute("aria-expanded"),r=e.nextElementSibling,o=e.querySelector(".faq-icon");e.setAttribute("aria-expanded",!t),r.style.display=t?"none":"block",o.textContent=t?"+":"-"})}),initCursorTrails(),document.addEventListener("mousemove",e=>{updateCursorTrails(e.pageX,e.pageY),updateHeroPortal(e)},{passive:!0});const s=document.querySelectorAll("section"),i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?e.target.classList.add("in-view"):e.target.classList.remove("in-view")})},{threshold:.3});s.forEach(e=>{i.observe(e)});const a=document.getElementById("contact-form");a&&a.addEventListener("submit",async e=>{e.preventDefault();const t=a.querySelector('button[type="submit"]'),r=t.textContent;let o=document.getElementById("form-message");o||(o=document.createElement("div"),o.id="form-message",o.style.cssText="margin-top: 1rem; padding: 1rem; border-radius: 0.375rem; text-align: center; font-weight: 500;",a.appendChild(o)),t.textContent="Sending...",t.disabled=!0,o.textContent="",o.style.display="none";const n=new FormData(a);try{(await fetch(a.action,{method:"POST",body:n,headers:{Accept:"application/json"}})).ok?(o.textContent=FORM_MESSAGES.success,o.style.backgroundColor="#D1FAE5",o.style.color="#065F46",o.style.display="block",o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),a.reset()):(o.textContent=FORM_MESSAGES.error,o.style.backgroundColor="#FEE2E2",o.style.color="#991B1B",o.style.display="block",o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"))}catch(e){o.textContent=FORM_MESSAGES.networkError,o.style.backgroundColor="#FEE2E2",o.style.color="#991B1B",o.style.display="block",o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive")}finally{t.textContent=r,t.disabled=!1}});document.querySelectorAll(".service-card, .project-card").forEach(e=>{e.addEventListener("mousemove",t=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;if(window.innerWidth<=768)return;const r=e.getBoundingClientRect(),o=t.clientX-r.left,n=t.clientY-r.top,s=r.width/2,i=r.height/2,a=(n-i)/i*-10,c=(o-s)/s*10;e.style.transform=`perspective(1000px) rotateX(${a}deg) rotateY(${c}deg) scale(1.05)`}),e.addEventListener("mouseleave",()=>{e.style.transform=""})})});