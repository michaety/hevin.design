function toggleMenu(){document.getElementById("nav-menu").classList.toggle("active")}const FORM_MESSAGES={success:"Message sent successfully! We'll get back to you soon.",error:"Error sending message. Please email us directly at info@hevin.design",networkError:"Network error. Please email us directly at info@hevin.design"};function debounce(e,t){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),e(...n)},t)}}function initCursorGradient(){const e=window.matchMedia("(pointer: coarse)").matches,t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(e||t)return;if(!document.querySelector(".cursor-gradient-overlay"))return;let o=50,n=50,r=null;document.addEventListener("mousemove",function(e){o=e.clientX/window.innerWidth*100,n=e.clientY/window.innerHeight*100,r||(r=requestAnimationFrame(()=>{document.body.style.setProperty("--cursor-x",`${o}%`),document.body.style.setProperty("--cursor-y",`${n}%`),r=null}))},{passive:!0})}document.addEventListener("DOMContentLoaded",()=>{initCursorGradient(),document.body.classList.add("loaded");const e=document.querySelector("nav"),t=e.querySelectorAll("a");let o=null;let n=null;window.addEventListener("resize",()=>{n&&clearTimeout(n),n=setTimeout(()=>{o=null},150)},{passive:!0}),t.forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();const r=document.querySelector(t.getAttribute("href"));if(r){const t=r.getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop;window.scrollTo({top:n+t.top-(null===o&&(o=e.offsetHeight),o)-20,behavior:"smooth"})}})});const r=document.querySelector("#nav-menu"),s=document.querySelector(".menu-toggle"),i=r?r.querySelectorAll("a"):[];r&&s&&(document.addEventListener("click",e=>{r.contains(e.target)||s.contains(e.target)||r.classList.remove("active")}),i.forEach(e=>{e.addEventListener("click",()=>{r.classList.remove("active")})}));const c=document.querySelectorAll("section, .service-card, .project-card, .process-step"),l=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),"section"===e.target.nodeName.toLowerCase()&&(e.target.classList.add("in-view"),e.target.style.opacity="1"),l.unobserve(e.target))})},{threshold:.1,rootMargin:"50px"});c.forEach(e=>{l.observe(e)});const a=document.querySelector(".faq");if(a){let e=null;a.addEventListener("mousemove",t=>{const o=t.target.closest(".faq-item");o&&!e&&(e=requestAnimationFrame(()=>{const n=o.getBoundingClientRect(),r=(t.clientX-n.left)/n.width*100,s=(t.clientY-n.top)/n.height*100;o.style.setProperty("--mouse-x",r+"%"),o.style.setProperty("--mouse-y",s+"%"),e=null}))}),a.addEventListener("click",e=>{const t=e.target.closest(".faq-question");if(!t)return;const o="true"===t.getAttribute("aria-expanded"),n=t.nextElementSibling,r=t.querySelector(".faq-icon");t.setAttribute("aria-expanded",!o),n.classList.toggle("open"),r.textContent=o?"+":"-"})}const d=document.getElementById("about");if(d){new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?d.classList.add("fade-to-white"):d.classList.remove("fade-to-white")})},{threshold:.2}).observe(d)}const u=document.getElementById("contact-form");u&&u.addEventListener("submit",async e=>{e.preventDefault();const t=u.querySelector('button[type="submit"]'),o=t.textContent;let n=document.getElementById("form-message");n||(n=document.createElement("div"),n.id="form-message",n.style.cssText="margin-top: 1rem; padding: 1rem; border-radius: 0.375rem; text-align: center; font-weight: 500;",u.appendChild(n)),t.textContent="Sending...",t.disabled=!0,n.textContent="",n.style.display="none";const r=new FormData(u);try{(await fetch(u.action,{method:"POST",body:r,headers:{Accept:"application/json"}})).ok?(n.textContent=FORM_MESSAGES.success,n.style.backgroundColor="#D1FAE5",n.style.color="#065F46",n.style.display="block",n.setAttribute("role","status"),n.setAttribute("aria-live","polite"),u.reset()):(n.textContent=FORM_MESSAGES.error,n.style.backgroundColor="#FEE2E2",n.style.color="#991B1B",n.style.display="block",n.setAttribute("role","alert"),n.setAttribute("aria-live","assertive"))}catch(e){n.textContent=FORM_MESSAGES.networkError,n.style.backgroundColor="#FEE2E2",n.style.color="#991B1B",n.style.display="block",n.setAttribute("role","alert"),n.setAttribute("aria-live","assertive")}finally{t.textContent=o,t.disabled=!1}});const m=document.querySelectorAll(".service-card, .project-card"),y=window.matchMedia("(pointer: coarse)").matches,g=window.matchMedia("(prefers-reduced-motion: reduce)").matches;m.forEach(e=>{if(!y&&!g&&window.innerWidth>768){let t=null,o=null,n=e.getBoundingClientRect();const r=debounce(()=>{n=e.getBoundingClientRect()},150);window.addEventListener("resize",r,{passive:!0});const s=()=>{if(!o)return;const r=o,s=r.clientX-n.left,i=r.clientY-n.top,c=n.width/2,l=n.height/2,a=s/n.width*100,d=i/n.height*100,u=(i-l)/l*-10,m=(s-c)/c*10;e.style.setProperty("--mouse-x",`${a}%`),e.style.setProperty("--mouse-y",`${d}%`),e.style.transform=`perspective(1000px) rotateX(${u}deg) rotateY(${m}deg) scale(1.05)`,t=null};e.addEventListener("mousemove",e=>{o=e,t||(t=requestAnimationFrame(s))}),e.addEventListener("mouseleave",()=>{o=null,t&&(cancelAnimationFrame(t),t=null),e.style.transform="",e.style.setProperty("--mouse-x","50%"),e.style.setProperty("--mouse-y","50%")})}});document.querySelectorAll(".shimmer").forEach((e,t)=>{const o=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add("visible")},400*t),o.unobserve(e.target))})},{threshold:.2});o.observe(e)})});